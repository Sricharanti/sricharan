##############################################################################
# Scenario    : L_DD_UART_SERIAL_0010_0001_01
# Author      : Venkatraman S
# Date        : Sep 23 2009
# Description : Test UART TX and RX CPU Affinity test
##############################################################################

# Begin L_DD_UART_SERIAL_0010_0001_01
# Here Trying to transmit a huge file (/bin/sh in this case,
# as it always exists)
# And receive it under file name receivedfile
# The test passes if both files match

01  set -x; test -f $HSUART_DIR_TMP/receivedfile && rm -f $HSUART_DIR_TMP/receivedfile
02  set -x; handlerCpuAffinity.sh "switch" "ts_uart r $UART_TEST_PORT1 $HSUART_DIR_TMP/receivedfile 115200 0 &" "10" "300"
03  set -x; handlerCpuAffinity.sh "switch" "ts_uart s $UART_TEST_PORT2 /bin/sh 115200 0" "10" "300"
04  set -x; diff /bin/sh $HSUART_DIR_TMP/receivedfile && exit 0 || exit 1

# End L_DD_UART_SERIAL_0010_0001_01

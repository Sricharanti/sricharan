##############################################################################
# Scenario    : L_DD_UART_SERIAL_0010_0002_01
# Author      : Venkatraman S
# Date        : Thu Sep 17 11:25:35 CDT 2009
# Modified by : Govindraj.R
# Modified On : Wed May 18 2010
# Description : Test Parallel Access from 2 processes
##############################################################################

# Begin L_DD_UART_SERIAL_0010_0002_01

# Here 2 UARTs are exercised simultaneously on 2 different CPUs
# Each CPU is doing TX and RX on different ports

01  set -x; handlerProcessParallelism.sh "clean"
02  set -x; handlerProcessParallelism.sh "add" "taskset -c 1 ts_uart r $UART_TEST_PORT1 3500000 0"
03  set -x; handlerProcessParallelism.sh "add" "taskset -c 0 ts_uart s $UART_TEST_PORT1 3500000 0"
04  set -x; handlerProcessParallelism.sh "add" "taskset -c 0 ts_uart r $UART_TEST_PORT2 3500000 0"
05  set -x; handlerProcessParallelism.sh "add" "taskset -c 1 ts_uart s $UART_TEST_PORT2 3500000 0"
06  set -x; handlerProcessParallelism.sh "execute"
07  set -x; diff uart_tx_file_$UART_TEST_PORT1 uart_rx_file_$UART_TEST_PORT1 && exit 0 || exit 1
07  set -x; diff uart_tx_file_$UART_TEST_PORT2 uart_rx_file_$UART_TEST_PORT2 && exit 0 || exit 1
# End L_DD_UART_SERIAL_0010_0002_01

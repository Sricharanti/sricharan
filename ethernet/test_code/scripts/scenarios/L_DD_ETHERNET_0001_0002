################################################################################
# Scenario: L_DD_ETHERNET_0001_0002
# Author  : Abraham Arce
# Modifications: Aharon Campos
# Date    : Fri Mar 28 13:59:10 CDT 2008
################################################################################

# Begin L_DD_ETHERNET_0001_0002

01  set -x; handlerIfconfig.sh "get" "ipaddr" && exit 0 || exit 1

02  set -x; cat /proc/interrupts | grep eth0
03  set -x; ifconfig | grep Interrupt:
04  set -x; cat /proc/interrupts | grep eth0 | sed -e 's@:@@' | sed q | awk '{print $2}' > $ETHERNET_DIR_TMP/COUNT1 && exit 0 || exit 1;
05  set -x; ping -c2 `cat $ETHERNET_EXTERNAL_HOST_IPADDR`
06  set -x; cat /proc/interrupts | grep eth0 | sed -e 's@:@@' | sed q | awk '{print $2}' > $ETHERNET_DIR_TMP/COUNT2 && exit 0 || exit 1;
07  set -x; if [ `cat $ETHERNET_DIR_TMP/COUNT1` -lt `cat $ETHERNET_DIR_TMP/COUNT2` ]; then exit 0; else exit 1; fi;

# End L_DD_ETHERNET_0001_0002
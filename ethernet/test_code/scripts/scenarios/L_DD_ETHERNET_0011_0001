###############################################################################
# Scenario: L_DD_ETHERNET_0011_0001
# Author  : Leed Aguilar
# Date    : 11/11/10
# Testing : Ethernet driver shall support CPU Affinity while doing data transfers
###############################################################################

# Begin L_DD_ETHERNET_0011_0001

# Obtain current cpu governor to be restored at the end of the test
0001 set -x; handlerCpuFreqScalGovernors.sh get
0002 set -x; handlerCpuFreqScalGovernors.sh set userspace

# Ensure that the system is still running with both CPUs enabled
0003 set -x; handlerSysFs.sh "set" $SYSFS_CPU1_ONLINE 1
0004 set -x; handlerSysFs.sh "compare" $SYSFS_CPU1_ONLINE 1

0005 set -x; handlerIfconfig.sh "get" "ipaddr"
0006 set -x; handlerIrqAffinity.sh "switch" "ping -c 100 -s $ETHERNET_PACKET_SIZE `cat $ETHERNET_EXTERNAL_HOST_IPADDR`" "5" "15" "`cat $ETHERNET_IRQ`"
0007 set -x; handlerCpuFreqScalGovernors.sh restore

# End L_DD_ETHERNET_0011_0001


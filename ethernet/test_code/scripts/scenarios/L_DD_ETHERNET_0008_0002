###############################################################################
# Scenario: L_DD_ETHERNET_0008_0002
# Author  : Shubhro
# Date    : Tue Oct 27 13:59:10 CDT 2009
###############################################################################

# Begin L_DD_ETHERNET_0008_0002

01  set -x; ifconfig | grep eth0 && ifconfig | grep addr: | sed -e 's@inet addr:@@' | sed q | awk '{print $1}' > $ETHERNET_DIR_TMP/ipaddr && exit 0 || exit 1;

02  set -x; ping -c 15 -s $ETHERNET_PACKET_SIZE `cat $ETHERNET_DIR_TMP/ipaddr` &
03  set -x; PING_PID=`echo $!`
04  set -x; $UTILS_DIR_BIN/taskset -p 1 $PING_PID

05  set -x; ping -c 15 -s $ETHERNET_PACKET_SIZE `cat $ETHERNET_DIR_TMP/ipaddr` &
06  set -x; PING_PID=`echo $!`
07  set -x; $UTILS_DIR_BIN/taskset -p 2 $PING_PID

08  set -x; $UTILS_DIR_HANDLERS/handlerProcessPriority.sh "add" "1" "ping -c 15 -s $ETHERNET_PACKET_SIZE `cat $ETHERNET_DIR_TMP/ipaddr`" "-20"
09  set -x; $UTILS_DIR_HANDLERS/handlerProcessPriority.sh "add" "2" "ping -c 15 -s $ETHERNET_PACKET_SIZE `cat $ETHERNET_DIR_TMP/ipaddr`" "+20"
10  set -x; $UTILS_DIR_HANDLERS/handlerProcessPriority.sh "execute" "1"
11  set -x; $UTILS_DIR_HANDLERS/handlerProcessPriority.sh "verify"

# End L_DD_ETHERNET_0008_0002
#!/bin/sh
################################################################################
# Configuration script
# Author  : Nishant Menon
# Date    : Tue Jun 13 12:23:42 CDT 2006
# Description: Configuration Script
################################################################################

# These variables don't need to be modified
export POSTFIX=`date "+%Y%m%d-%H%M%S"`
export TESTROOT=${PWD}
export TESTBIN=${PWD}/../bin
export MODDIR=${PWD}/../mods
export TESTSCRIPT=${PWD}/helper
export TMPBASE=${TESTROOT}/tmp
export TMPFILE=${TMPBASE}/tmp.$POSTFIX
export CMDFILE=cmd.$POSTFIX
export TESTDIR=${TESTROOT}/test
export PRETTY_PRT=""
export VERBOSE=""
export OUTPUTFILE=${TESTROOT}/output.$POSTFIX
export LOGFILE=${TESTROOT}/log.$POSTFIX
export DURATION=""
export PATH="${TESTROOT}:${TESTBIN}:${TESTSCRIPT}:${PATH}"
export TC_SCENARIO="${TESTROOT}/scenarios"
export SCENARIO_NAMES=""
export STRESS=""

# Utilities
export UTILBIN=${TESTROOT}/../../utils/bin
export WAITKEY=$UTILBIN/akey

#The main bus on which the tests will be conducted
export I2C_TEST_BUS1=1
export I2C_TEST_BUS2=2
export I2C_TEST_BUS3=3
export I2C_DEV="1 2"

export I2C_FS=400
export I2C_HS=2600
export I2C_DEF_SPEED1=$I2C_HS
export I2C_DEF_SPEED2=$I2C_FS
export I2C_DEF_SPEED3=$I2C_FS

# Driver Specific
export INTERRUPT_PREFIX="i2c_omap"
export I2C_DEV_PATH=/dev/i2c/

# General SDP 2430/3430 settings
export I2C_STD=100
export I2C_FS=400
export I2C_HS=2600
export I2C_DEF_SPEED0=$I2C_FS
export I2C_DEF_SPEED1=$I2C_HS

# AUD_CTL -> Audio reg on T2-multi writable regs
export I2C_TEST_B1_D1_ADD=0x49
export I2C_TEST_B1_D1_OFF=0x01

# LONG_KEY_REG1 ->Keypad on T2
export I2C_TEST_B1_D2_ADD=0x4A
export I2C_TEST_B1_D2_OFF=0xD4

# Secondary Bus - Will only work once! -all registers are set/clear regs..
export I2C_TEST_B2_D1_ADD=0x2D
export I2C_TEST_B2_D1_ON=0xC
export I2C_TEST_B2_D1_OFF=0xD

# False Device
export I2C_TEST_B1_D1_NODEV=0x50

# More generic settings
export I2C_VAR_SPEED0=i2c_clock0
export I2C_VAR_SPEED1=i2c_clock1
export MODULE_NAME=i2c-omap_hs
export MODULE_EXT=ko

# Mount DevFS if not mounted..
if [ ! -d /dev/i2c ]; then
	mkdir /dev/i2c
fi

if [ ! -c /dev/i2c/1 ]; then
	echo "Linking sysfs entries..."
	ln -s /dev/i2c-0 /dev/i2c/0
	ln -s /dev/i2c-1 /dev/i2c/1
	ln -s /dev/i2c-2 /dev/i2c/2
fi

export HEAD_OPTION="-n "
export TAIL_OPTION="-n "

# End of file

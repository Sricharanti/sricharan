###################################################################################################################
# Scenario: L_DD_Power_0001
# Author  : Misael Lopez Cruz
# Date    : 04 Jul 07
# Description: 	0001 Tests that the system time is maintained with dynamic tick.
#		0002 Test that the tick suppresion is happening. 
###################################################################################################################


# Begin  L_DD_Power_0001

0001	echo "Please count for 600 secs, use a wall clock or watch for reference" && $UTILBIN/waitkey && echo "Count has started!" && $TESTBIN/time_difference `date '+%H %M %S'; sleep 600; date '+%H %M %S'` 600 && exit 0 || exit 1

0002	echo "To start the interrup test please press a button" && $UTILBIN/waitkey && echo "Interrupt Test has started" && date && t1=`cat /proc/interrupts | grep timer | awk '{print $2}'` && t1=`echo $t1 | awk '{print $1}'` && $TESTBIN/time_difference `date '+%H %M %S';sleep 30; date '+%H %M %S'` 30 && t2=`cat /proc/interrupts | grep timer | awk '{print $2}'` && t2=`echo $t2 | awk '{print $1}'` && dt=`echo "$t2-$t1" | bc` && echo "Number of interrupts: $dt" && test $dt -ge $MIN_INT_PER_SECOND && test $dt -le $MAX_INT_PER_SECOND && exit 0 || exit 1

#End L_DD_Power_0001

################################################################################
# Scenario: L_DD_USBDevice_0006_1
# Author  : Axel Castaneda Gonzalez
# Date    : December 4, 2006
# Description:  Functional test for serial gadget using Linux PC host.
# ChangeLog:
#	27 Jan 2009 - Diego Zavala Trujillo - Update Scenario.
################################################################################

foo	echo L_DD_USBDevice_0006_1

0  insmod $MODULE_PATH/g_serial.ko  &&  echo -e "\n\n\t Testing Serial Gadget functionality. \n\n The OMAP acts like a Device."  &&  sleep $DELAY1   &&  echo "0" > $LOGBASE/log.panresult  &&  exit 0  || echo -e "\n\n\t ERROR1 - No module found. \n\n"; echo "1" > $LOGBASE/log.panresult  &&  exit 1

1  if [ `cat $LOGBASE/log.panresult` = 0 ]; then echo -e "\n\n\t Please connect cable. [ MiniB to OMAP - Std-A to Linux PC ] \n "  &&  sleep $DELAY3  &&  ${TESTROOT}/test_runner.sh -p L_DD_USBDevice_0006_core  &&  exit 0 || exit 1; else echo -e "\n\n\t ERROR1 - Could not run this test because the module has not been inserted. \n\n"; exit 1; fi

2  rm -rf $LOGBASE/log.panresult; rmmod g_serial && exit 0 || exit 1

bar	echo L_DD_USBDevice_0006_1

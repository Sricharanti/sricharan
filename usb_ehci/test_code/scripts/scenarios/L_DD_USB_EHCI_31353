################################################################################
# Scenario:    L_DD_USB_EHCI_31353
# Author  :    Andrii Danylov
# Date    :    April 11th, 2013
# Description: SMP: Process Priority DWC_Host
# Host USB DWC_host driver and _host shall support Process Priority
# while doing data transfers.
################################################################################

# Begin L_DD_USB_EHCI_31353

00  set -x; mount /dev/block/sda1 /storage/usb0

01  set -x; handlerProcessPriority.sh "add" "1" "dd if=/dev/urandom of=$USBHOST_TEST_FOLDER/file.1 bs=1M count=50 && sync" "-20"
02  set -x; handlerProcessPriority.sh "add" "2" "dd if=/dev/urandom of=$USBHOST_TEST_FOLDER/file.2 bs=1M count=50 && sync" "+20"
03  set -x; handlerProcessPriority.sh "execute" "5"

04  set -x; handlerCmd.sh "run" "dd if=/dev/urandom of=$USBHOST_TEST_FOLDER/file.temporal bs=1M count=100 && sync"
05  set -x; handlerProcessPriority.sh "add" "1" "cp $USBHOST_TEST_FOLDER/file.temporal $USBHOST_TEST_FOLDER/file.1 && sync" "-20"
06  set -x; handlerProcessPriority.sh "add" "2" "cp $USBHOST_TEST_FOLDER/file.temporal $USBHOST_TEST_FOLDER/file.2 && sync" "+20"
07  set -x; handlerProcessPriority.sh "execute" "5"
08  set -x; handlerCmd.sh "run" "cmp $USBHOST_TEST_FOLDER/file.1 $USBHOST_TEST_FOLDER/file.2"

09  set -x; rm $USBHOST_TEST_FOLDER/file.*
10 set -x; umount /storage/usb0

# End L_DD_USB_EHCI_31353

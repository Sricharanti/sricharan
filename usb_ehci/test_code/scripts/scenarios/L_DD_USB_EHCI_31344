################################################################################
# Scenario:    L_DD_USB_EHCI_31344
# Author  :    Andrii Danylov
# Date    :    March 27th, 2013
# Description: USB Mass Storage devicesTest if the Host
# can use USB Mass Storage Devices
################################################################################

# Begin L_DD_USB_EHCI_31344

00	echo -e '\n\n\t Connect USB device \n\n'  &&  sleep $DELAY1 && exit 0 || exit 1
01	set -x; cat /sys/kernel/debug/usb/devices | grep "Flash Disk" && exit 0 || exit 1
02	set -x; mount /dev/block/sda1 /storage/usb0

03	set -x; dd if=/dev/zero of=$USBHOST_DIR_TMP/100m bs=1M count=100
04	set -x; cp $USBHOST_DIR_TMP/100m /storage/usb0/ && exit 0 || exit 1
05	set -x; cmp $USBHOST_DIR_TMP/100m /storage/usb0/100m && exit 0 || exit 1
06	set -x; rm $USBHOST_DIR_TMP/100m ; rm /storage/usb0/100m

07	set -x; dd if=/dev/zero of=/storage/usb0/150m bs=1M count=150 && exit 0 || exit 1
08	set -x; cp /storage/usb0/150m $USBHOST_DIR_TMP/ && exit 0 || exit 1
09	set -x; cmp $USBHOST_DIR_TMP/150m /storage/usb0/150m && exit 0 || exit 1
10	set -x; rm $USBHOST_DIR_TMP/150m ; rm /storage/usb0/150m
11	set -x; umount /storage/usb0

# End L_DD_USB_EHCI_31344

###################################################################################################################
# Scenario: L_DD_MMC_0007F
# Author  : Misael Lopez Cruz
# Date    : September 20, 2006
# Description: File I/O operations over MMC device
###################################################################################################################

# Begin L_DD_MMC_0007F

setup_1 mkdir $MOUNT_POINT1; echo -e "n\n p\n 1\n $START_SECTOR_DEV1\n $END_SECTOR_DEV1\n w\n" | fdisk $ROOT_ENTRY_DEV1 && $TESTBIN/mke2fs $PARTITION1_ENTRY_DEV1 &&  mount -t ext2 $PARTITION1_ENTRY_DEV1 $MOUNT_POINT1 && exit 0 || exit 1
setup_2 mkdir $MOUNT_POINT2; echo -e "n\n p\n 1\n $START_SECTOR_DEV2\n $END_SECTOR_DEV2\n w\n" | fdisk $ROOT_ENTRY_DEV2 && $TESTBIN/mke2fs $PARTITION1_ENTRY_DEV2 &&  mount -t ext2 $PARTITION1_ENTRY_DEV2 $MOUNT_POINT2 && exit 0 || exit 1

0001_1	mmc_test_dev0 1 testing1 && mmc_test_dev0 1 testing2 && exit 0 || exit 1
0001_2	mmc_test_dev1 1 testing1 && mmc_test_dev1 1 testing2 && exit 0 || exit 1
0002_1	mmc_test_dev0 2 testing1 10 && mmc_test_dev0 2 testing2 10 && exit 0 || exit 1
0002_2	mmc_test_dev1 2 testing1 10 && mmc_test_dev1 2 testing2 10 && exit 0 || exit 1
0003_1	mmc_test_dev0 3 testing1 10 && exit 0 || exit 1
0003_2	mmc_test_dev1 3 testing1 10 && exit 0 || exit 1
0004_1	mmc_test_dev0 4 testing1 && exit 0 || exit 1
0004_2	mmc_test_dev1 4 testing1 && exit 0 || exit 1
0005_1	mmc_test_dev0 5 testing1 && exit 0 || exit 1
0005_2	mmc_test_dev1 5 testing1 && exit 0 || exit 1
0006_1	mmc_test_dev0 6 testing1 test && exit 0 || exit 1
0006_2	mmc_test_dev1 6 testing1 test && exit 0 || exit 1
0007_1	mmc_test_dev0 7 && exit 0 || exit 1
0007_2	mmc_test_dev1 7 && exit 0 || exit 1
0008_1	mmc_test_dev0 8 test 777 && exit 0 || exit 1
0008_2	mmc_test_dev1 8 test 777 && exit 0 || exit 1
0009_1	mmc_test_dev0 9 newdir && exit 0 || exit 1
0009_2	mmc_test_dev1 9 newdir && exit 0 || exit 1
0010_1	mmc_test_dev0 10 $MOUNT_POINT1/test newdir && exit 0 || exit 1
0010_2	mmc_test_dev1 10 $MOUNT_POINT2/test newdir && exit 0 || exit 1
0011_1	mmc_test_dev0 11 testing2 200308171820 && exit 0 || exit 1
0011_2	mmc_test_dev1 11 testing2 200308171820 && exit 0 || exit 1
0012_1	mmc_test_dev0 12 newdir rendir && exit 0 || exit 1
0012_2	mmc_test_dev1 12 newdir rendir && exit 0 || exit 1
0013_1	mmc_test_dev0 13 $MOUNT_POINT1/testing2 $MOUNT_POINT1/rendir/
0013_2	mmc_test_dev1 13 $MOUNT_POINT2/testing2 $MOUNT_POINT2/rendir/
0014_1	mmc_test_dev0 14 rendir 123
0014_2	mmc_test_dev1 14 rendir 123
0015_1	mmc_test_dev0 15 $MOUNT_POINT1/rendir/test && mmc_test_dev0 15 $MOUNT_POINT1/rendir/testing2 && mmc_test_dev0 15 $MOUNT_POINT1/test && exit 0 || exit 1
0015_2  mmc_test_dev1 15 $MOUNT_POINT2/rendir/test && mmc_test_dev1 15 $MOUNT_POINT2/rendir/testing2 && mmc_test_dev1 15 $MOUNT_POINT2/test && exit 0 || exit 1
0016_1	mmc_test_dev0 16 rendir && exit 0 || exit 1
0016_2	mmc_test_dev1 16 rendir && exit 0 || exit 1
0017_1	mmc_test_dev0 17 $TESTROOT/$BIG_FILE $MOUNT_POINT1 && exit 0 || exit 1
0017_2	mmc_test_dev1 17 $TESTROOT/$BIG_FILE $MOUNT_POINT2 && exit 0 || exit 1
0018_1	mmc_test_dev0 18 $TESTROOT/$SMALL_FILES $MOUNT_POINT1 && exit 0 || exit 1
0018_2	mmc_test_dev1 18 $TESTROOT/$SMALL_FILES $MOUNT_POINT2 && exit 0 || exit 1
0019_1	cp $TESTROOT/$BIG_FILE $MOUNT_POINT1 && mmc_test_dev0 19 $MOUNT_POINT1/$BIG_FILE $TMPBASE && exit 0 || exit 1
0019_2  cp $TESTROOT/$BIG_FILE $MOUNT_POINT2 && mmc_test_dev1 19 $MOUNT_POINT2/$BIG_FILE $TMPBASE && exit 0 || exit 1
0020_1	cp -r $TESTROOT/$SMALL_FILES $MOUNT_POINT1 && mmc_test_dev0 20 $MOUNT_POINT1/$SMALL_FILES $TMPBASE && exit 0 || exit 1
0020_2  cp -r $TESTROOT/$SMALL_FILES $MOUNT_POINT2 && mmc_test_dev1 20 $MOUNT_POINT2/$SMALL_FILES $TMPBASE && exit 0 || exit 1
0021_1_EXT mmc_test_dev0 21 && exit 0 || exit 1
0021_2_EXT mmc_test_dev1 21 && exit 0 || exit 1
0027_1	mmc_test_dev0 24 testing && exit 0 || exit 1
0027_2	mmc_test_dev1 24 testing && exit 0 || exit 1
0028_1	mmc_test_dev0 9 dir && mmc_test_dev0 26 dir && exit 1 || exit 0
0028_2	mmc_test_dev1 9 dir && mmc_test_dev1 26 dir && exit 1 || exit 0
0029_1	mmc_test_dev0 1 testing3 && mmc_test_dev0 26 testing3 && exit 0 || exit 1
0029_2	mmc_test_dev1 1 testing3 && mmc_test_dev1 26 testing3 && exit 0 || exit 1

cleanup_1 umount $MOUNT_POINT1 && echo -e "d\n w\n" | fdisk $ROOT_ENTRY_DEV1 && exit 0 || exit 1
cleanup_2 umount $MOUNT_POINT2 && echo -e "d\n w\n" | fdisk $ROOT_ENTRY_DEV2 && exit 0 || exit 1

# End L_DD_MMC_0007F

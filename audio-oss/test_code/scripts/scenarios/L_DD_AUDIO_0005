#####################
# FILENAME: L_DD_AUDIO_0005
# Author  : Nishanth Menon
# Date    : Wed Apr 26 11:38:48 CDT 2006
# Copyright (C) 2006 Texas Instruments
#
# Description:
#--- Full Duplex SCENARIOS
# This shall attempt to Fullduplex audio using  combinations of:
# 1.	All supported sample rates
# 2.	All supported sample sizes
# 3.	All supported channels
# 4.	Record Gain Values
# 5.	Record sources
# 6.	Varied buffer sizes
# 7.	Power management - scale and deep sleep
# For normal testing we do complete tests for two sample rates - a min and a max
# IMPORTANT:
# For Full duplex testing - ensure you dont record and playback on the same headset,
# Feedback noise can cause issues where the input may not be reproducable on replay.

foo   echo "L_DD_AUDIO_0005"

0001_setup t2_src_changer -i 2 -o 2 -d /dev/sound/dsp ;if [ $? -ne 0 ]; then exit 1; else exit 0; fi

# Time for a support script!!!
0001 export INPUT_DEVICES=2;export OUTPUT_DEVICES=2; export SAMPLE_RATES="44100 8000";export BUFFER_SIZES=4096;fd_wrapper.sh;if [ $? -ne 0 ]; then exit 1; else exit 0; fi
#Scale testing - pretty ordinary
#0002a export INPUT_DEVICES=2;export OUTPUT_DEVICES=2;export SAMPLE_RATES="44100 8000";export POWER_MANAGEMENT="scale";export BUFFER_SIZES=4096;fd_wrapper.sh;if [ $? -ne 0 ]; then exit 1; else exit 0; fi
# This is painful - some one has to wake up the device..
#0002b export INPUT_DEVICES=2;export OUTPUT_DEVICES=2; export SAMPLE_RATES="44100 8000";export POWER_MANAGEMENT="sleep";export BUFFER_SIZES=4096;fd_wrapper.sh;if [ $? -ne 0 ]; then exit 1; else exit 0; fi

# Torture test - 
#0001b fd_wrapper.sh;if [ $? -ne 0 ]; then exit 1; else exit 0; fi
# Paranoia Test - The following tests are downright crazy... run them at risk of ur fingers ;)
##0002d_EXT export POWER_MANAGEMENT="sleep";fd_wrapper.sh;if [ $? -ne 0 ]; then exit 1; else exit 0; fi
##0002e_EXT export POWER_MANAGEMENT="scale";fd_wrapper.sh;if [ $? -ne 0 ]; then exit 1; else exit 0; fi

0001_final t2_src_changer -i 1 -o 1 -d /dev/sound/dsp ;if [ $? -ne 0 ]; then exit 1; else exit 0; fi

bar   echo "L_DD_AUDIO_0005"

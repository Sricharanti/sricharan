# include.common - common scripts used in all quickie folks
BINDIR=$HOMEDIR/../../bin
RAWDIR=$HOMEDIR/../raw_sin/
MODDIR=$HOMEDIR/../mod/
PLAYER=$BINDIR/player
FD=$BINDIR/fulldup
CHANGER=$BINDIR/t2_src_changer
RECORDER=$BINDIR/recorder
DPM_TEST=$HOMEDIR/dpm_test
DPM_24SCR=$HOMEDIR/dpm_cee31
DPM_26SCR=$HOMEDIR/dpm_mvl41
DPM_DIR=/sys/dpm/
PM_DIR=/sys/power/
PM_FILE=/sys/power/state
BASE_VOLUME=80
VOLUME=`echo "$BASE_VOLUME * 2^8 + $BASE_VOLUME"|bc`
DSP_DEVICE=/dev/sound/dsp
MIXER_DEVICE=/dev/sound/dsp
SIN_FREQ=1000
CHANGER_GENERIC_OPTION="-d $MIXER_DEVICE"
PLAYER_GENERIC_OPTION="-d $DSP_DEVICE -v $VOLUME -a 1"
RECORDER_GENERIC_OPTION="-d $DSP_DEVICE -v $VOLUME -t 2 -a 1 "
FD_GENERIC_OPTION="-d $DSP_DEVICE -v $VOLUME -g $VOLUME "
INPUT_EVENT=0
if [ ! -z "$EXEC_FILE" ]; then
	EXEC_NAME=`echo $0|sed -e "s/.*\///"`
	FREQUENCY=`echo $EXEC_NAME|cut -d'_' -f2`
	BITS=`echo $EXEC_NAME|cut -d'_' -f3`
	STEREO=`echo $EXEC_NAME|cut -d'_' -f4`
	EXT=`echo $EXEC_NAME|cut -d'_' -f5`
	if [ "$STEREO" = "mono" ]; then
		EXT=m
	fi
	PLAYFILE_NAME=`echo "sin-$SIN_FREQ-$FREQUENCY-$BITS-$STEREO-$EXT"|tr - _`
	PLAYFILE_NAME="$RAWDIR/$PLAYFILE_NAME"
fi
ALL_SAMPLE_RATES="48000 44100 32000 24000 22050 16000 12000 11025 8000"
ALL_BIT_SIZE="16 24"
ALL_MONO_SUPPORT="mono stereo"
ALL_STEREO_DIR_SUPPORT="s l r"
ALL_OUTPUT_DEVICES="1 2"
ALL_INPUT_DEVICES="1 2"
ALL_POWER_MANAGEMENT="scale sleep"
ALL_BUFFER_SIZES="1024 4096 2048 65536 4085"
DPM_SCALE_OPTION=6
DPM_SLEEP_OPTION=4
SC_DPM_SCALE_OPTION=6
SC_DPM_SLEEP_OPTION=4
DPM_QUIT_OPTION=0
SC_DPM_QUIT_OPTION=0
DURATION=2
TMP_BASE=/tmp
KERNEL_VERSION=`uname -r`

# Each variant of kernel we maintain has different module names,
# but all of them are the same files..! Sigh!!
case $KERNEL_VERSION in
	2.6.10_mobilinux410)
		echo "2.6 kernel MVL410"
		AUDIO_MODULE=omap2-audio.ko
		BUF_MODULE=omap2-audio-buf-intfc.ko
		# Assuming for the timebeing only 2430SDP V1.1!!
		CODEC_MODULE=omap2-audio-twl4030.ko
		DPM_SCR=$DPM_26SCR
		;;
  2.6.14.7-arm1-omap2)
    echo "2.6 Kernel Open Source"
		AUDIO_MODULE=omap2-audio.ko
		BUF_MODULE=omap2-audio-buf-intfc.ko
		CODEC_MODULE=omap2-audio-twl4030.ko
		DPM_SCR=$DPM_26SCR
    ;;
  2.6.14.7-omap2)
    echo "2.6 Kernel Open Source"
		AUDIO_MODULE=omap2-audio.ko
		BUF_MODULE=omap2-audio-buf-intfc.ko
		CODEC_MODULE=omap2-audio-twl4030.ko
		DPM_SCR=$DPM_26SCR
    ;;
  2.6.19.2-omap1)
    echo "2.6 Kernel Open Source"
		AUDIO_MODULE=omap2-audio.ko
		BUF_MODULE=omap2-audio-buf-intfc.ko
		CODEC_MODULE=omap2-audio-twl4030.ko
		DPM_SCR=$DPM_26SCR
    ;;          
	2.4.20_mvlcee31-omap2420_gsm_gprs)
		echo "2.4 kernel CEE3.1"
		AUDIO_MODULE=omap-audio2.o
		BUF_MODULE=omap-audio-buf-intfc.o
		# Assuming for the timebeing only 2430SDP V1.1!!
		CODEC_MODULE=omap-audio-twl4030.o
		DPM_SCR=$DPM_24SCR
		;;
	*) 
		echo "Unknown Kernel!!!! Failing!!\n"
		;;
esac

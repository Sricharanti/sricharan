###################################################################################################################
# Scenario: L_DD_NAND_0005
# Author  : Misael Lopez Cruz
# Date    : August 29th, 2006
# Description: JFFS2 operation tests
###################################################################################################################

# Begin L_DD_NAND_0005

setup	test -d $DEFAULT_MOUNT_POINT || mkdir $DEFAULT_MOUNT_POINT
0001	$TESTBIN/flash_eraseall $JFFS_OPTIONS $MTD_CHAR_DEV1 && mount -t jffs2 $MTD_BLK_DEV1 /mnt/nand && mount|grep "$DEFAULT_MOUNT_POINT" && exit 0 || exit 1
0001_cleanup umount $DEFAULT_MOUNT_POINT && exit 0 || exit 1
0002	$TESTBIN/flash_eraseall $JFFS_OPTIONS $MTD_CHAR_DEV1 && $TESTBIN/nandwrite -p $MTD_CHAR_DEV1 $JFFS2_IMAGE && mount -t jffs2 $MTD_BLK_DEV1 $DEFAULT_MOUNT_POINT && mount|grep "$DEFAULT_MOUNT_POINT" && exit 0 || exit 1
0002_cleanup umount $DEFAULT_MOUNT_POINT && exit 0 || exit 1
0003_setup mount -t jffs2 $MTD_BLK_DEV1 $DEFAULT_MOUNT_POINT && mount|grep "$DEFAULT_MOUNT_POINT" && exit 0 || exit 1
0003	umount $DEFAULT_MOUNT_POINT && exit 0 || exit 1
cleanup	test -d $DEFAULT_MOUNT_POINT && rm -r $DEFAULT_MOUNT_POINT && exit 0 || exit 1

# End L_DD_NAND_0005
